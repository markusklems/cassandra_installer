#!/bin/sh -ex
## Install Apache Cassandra and dependencies.
## By Markus Klems (2012).
## Tested with Ubuntu 12.04 Precise Pangolin.
## No warranties.

mntpoint=${1:-/mnt}

# Create directories.
sudo mkdir /var/lib/cassandra
sudo mkdir /var/lib/cassandra/data
sudo mkdir /var/lib/cassandra/commitlog
sudo mkdir /var/lib/cassandra/saved_caches
sudo ln -s /var/lib/cassandra $mntpoint
sudo mkdir /var/log/cassandra
sudo mkdir /var/run/cassandra
sudo touch /var/run/cassandra.pid

# Set access permission.
sudo chown cassandra:cassandra /var/run/cassandra
sudo chown cassandra:cassandra /var/run/cassandra.pid
sudo chown -R cassandra:cassandra /var/lib/cassandra
sudo chown cassandra:cassandra /var/log/cassandra
sudo chown -R cassandra:cassandra /etc/cassandra
sudo chown -R cassandra:cassandra /usr/share/cassandra
sudo chown -R cassandra:cassandra /usr/bin/cassandra-*
sudo chown -R cassandra:cassandra /usr/sbin/cassandra
sudo chown -R cassandra:cassandra /etc/default/cassandra
sudo chown -R cassandra:cassandra /etc/security/limits.d
